<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</title>
  <style>
    body {
      font-family: monospace;
      background-color: #fff;
      color: #000;
      padding: 1em;
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* Login Screen */
    #loginScreen {
      text-align: center;
      padding: 2em;
      border: 1px solid #000;
      background-color: #f9f9f9;
    }
    
    #loginScreen input {
      display: block;
      margin: 1em auto;
      width: 200px;
      padding: 0.8em;
      font-size: 1em;
    }
    
    #loginScreen button {
      padding: 0.8em 2em;
      font-size: 1.1em;
      cursor: pointer;
      margin: 0.5em;
    }
    
    /* Main App */
    #mainApp {
      display: none;
    }
    
    #userInfo {
      text-align: right;
      margin-bottom: 1em;
      font-size: 0.9em;
      color: #666;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5em;
    }
    
    #userInfo button {
      font-size: 0.8em;
      padding: 0.3em 0.8em;
      margin-left: 1em;
    }
    
    #date { 
      font-weight: bold; 
      margin-bottom: 1em; 
      font-size: 1.2em;
    }
    
    #content { 
      white-space: pre-wrap; 
      line-height: 1.6;
      margin-bottom: 2em;
    }
    
    #passwordPrompt {
      display: none;
      margin-top: 1em;
      padding: 1em;
      border: 1px solid #000;
      background-color: #f9f9f9;
    }
    
    #randomButton {
      display: block;
      margin: 2em auto;
      padding: 1em 2em;
      font-size: 1.1em;
      cursor: pointer;
    }
    
    #randomButton:disabled {
      background-color: #ccc;
      color: #666;
      cursor: not-allowed;
    }
    
    #quota {
      text-align: center;
      margin-bottom: 1em;
      font-size: 0.9em;
      color: #666;
    }
    
    input, button {
      font-family: monospace;
      background: #fff;
      color: #000;
      border: 1px solid #000;
      padding: 0.5em;
      margin: 0.25em;
    }
    
    button:hover:not(:disabled) {
      background-color: #000;
      color: #fff;
    }
    
    .entry-container {
      display: none;
      margin-top: 2em;
    }
    
    .entry-container.show {
      display: block;
    }
    
    .loading {
      text-align: center;
      color: #666;
      font-style: italic;
    }
    
    .error {
      color: #d00;
      text-align: center;
      margin: 1em 0;
    }
  </style>
</head>
<body>
  <!-- Login Screen -->
  <div id="loginScreen">
    <h1>üìì ‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h1>
    <h2>üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
    
    <div id="loginError" class="error"></div>
    
    <input type="text" id="username" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" />
    <input type="password" id="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" />
    <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    
    <div style="margin-top: 2em; font-size: 0.9em; color: #666;">
      <p>‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå diary.json ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</p>
      <p>alice / alice123</p>
      <p>bob / bob456</p>
      <p>admin / admin123</p>
    </div>
  </div>

  <!-- Main App -->
  <div id="mainApp">
    <div id="userInfo">
      üë§ <span id="currentUser"></span>
      <button onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
    
    <h1>üìì ‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h1>
    
    <div id="quota"></div>
    
    <button id="randomButton" onclick="randomDiary()">
      üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà
    </button>
    
    <div id="diary" class="entry-container">
      <div id="date"></div>
      <div id="content"></div>
      <div id="passwordPrompt">
        <p>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏ß‡πâ üîí ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</p>
        <input type="password" id="pw" placeholder="password">
        <button onclick="checkPassword()">‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å</button>
      </div>
    </div>
  </div>

  <script>
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å diary.json
    let diaryData = [];
    let users = {};
    
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà)
    const userQuota = {};

    let currentEntry = null;
    let currentUser = null;

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Login
    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      const errorDiv = document.getElementById('loginError');
      
      if (!username || !password) {
        errorDiv.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô";
        return;
      }
      
      if (users[username] && users[username].password === password) {
        currentUser = username;
        document.getElementById('currentUser').textContent = users[username].name;
        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('mainApp').style.display = 'block';
        
        // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ç‡∏≠‡∏á user ‡∏ô‡∏µ‡πâ
        checkUserQuota();
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£ login
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
        errorDiv.textContent = '';
      } else {
        errorDiv.textContent = "‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
      }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Logout
    function logout() {
      currentUser = null;
      document.getElementById('loginScreen').style.display = 'block';
      document.getElementById('mainApp').style.display = 'none';
      document.getElementById('diary').className = 'entry-container';
      document.getElementById('content').innerHTML = '';
      document.getElementById('passwordPrompt').style.display = 'none';
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ç‡∏≠‡∏á user
    function checkUserQuota() {
      if (!currentUser) return;
      
      const today = new Date().toISOString().slice(0, 10);
      const userKey = `${currentUser}_${today}`;
      
      if (userQuota[userKey]) {
        // user ‡∏ô‡∏µ‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
        document.getElementById('randomButton').disabled = true;
        document.getElementById('randomButton').textContent = 'üìö ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
        document.getElementById('quota').textContent = `‚úÖ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß (${userQuota[userKey]}) ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞`;
      } else {
        // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
        document.getElementById('randomButton').disabled = false;
        document.getElementById('randomButton').textContent = 'üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà';
        document.getElementById('quota').textContent = 'üìñ ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô';
      }
    }

    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤ user ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
    function markUserAsRead() {
      if (!currentUser) return;
      
      const today = new Date().toISOString().slice(0, 10);
      const now = new Date().toLocaleString('th-TH');
      const userKey = `${currentUser}_${today}`;
      
      userQuota[userKey] = now;
      
      document.getElementById('randomButton').disabled = true;
      document.getElementById('randomButton').textContent = 'üìö ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
      document.getElementById('quota').textContent = `‚úÖ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß (${now}) ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞`;
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å diary.json
    async function loadDiary() {
      try {
        const res = await fetch("diary.json");
        if (!res.ok) throw new Error("‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå diary.json");
        const data = await res.json();
        
        // ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• users ‡πÅ‡∏•‡∏∞ diary
        users = data.users || {};
        diaryData = data.diary || [];
        
        console.log("‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", Object.keys(users).length, "users,", diaryData.length, "diary entries");
      } catch (error) {
        console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:", error);
        // ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        users = {
          "alice": { password: "alice123", name: "‡∏≠‡∏•‡∏¥‡∏ã" },
          "bob": { password: "bob456", name: "‡∏ö‡πá‡∏≠‡∏ö" },
          "admin": { password: "admin123", name: "‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö" }
        };
        
        diaryData = [
          {
            date: "2025-07-15",
            content: "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏Ñ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\n‡πÑ‡∏´‡∏•‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î",
            locked: false
          },
          {
            date: "2025-08-01",
            content: "‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î üéÇ\n‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡πÜ",
            locked: true,
            password: "hello123"
          },
          {
            date: "2025-12-31",
            content: "‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏õ‡∏µ\n‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏™‡∏¥‡πà‡∏á‡∏î‡∏µ‡πÜ",
            locked: false,
            forceDate: "2025-12-31"
          }
        ];
        
        alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå diary.json ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á");
      }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà
    async function randomDiary() {
      if (!currentUser) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }

      const today = new Date().toISOString().slice(0, 10);
      const userKey = `${currentUser}_${today}`;
      
      if (userQuota[userKey]) {
        alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ô‡∏∞");
        return;
      }

      // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î
      document.getElementById('content').innerHTML = '<div class="loading">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà...</div>';
      document.getElementById('diary').className = 'entry-container show';

      // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥
      await new Promise(resolve => setTimeout(resolve, 1000));

      let entry = null;

      // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      const forcedEntry = diaryData.find(d => d.forceDate === today);
      if (forcedEntry) {
        entry = forcedEntry;
        console.log("‡∏û‡∏ö‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ");
      } else {
        // ‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
        const availableEntries = diaryData.filter(d => !d.forceDate);
        if (availableEntries.length === 0) {
          alert("‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô");
          return;
        }
        entry = availableEntries[Math.floor(Math.random() * availableEntries.length)];
        console.log("‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà‡πÑ‡∏î‡πâ:", entry.date);
      }

      currentEntry = entry;
      document.getElementById('date').textContent = `üìÖ ${entry.date}`;
      document.getElementById('content').innerHTML = '';

      // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      if (entry.locked) {
        document.getElementById('passwordPrompt').style.display = 'block';
      } else {
        document.getElementById('passwordPrompt').style.display = 'none';
        revealLines(entry.content);
      }

      // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
      markUserAsRead();
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
    function checkPassword() {
      const pw = document.getElementById('pw').value;
      if (pw === currentEntry.password) {
        document.getElementById('passwordPrompt').style.display = 'none';
        document.getElementById('pw').value = '';
        revealLines(currentEntry.content);
      } else {
        alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        document.getElementById('pw').value = '';
      }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î
    function revealLines(text) {
      const lines = text.split('\n');
      document.getElementById('content').innerHTML = '';
      
      let i = 0;
      const interval = setInterval(() => {
        if (i >= lines.length) {
          clearInterval(interval);
          return;
        }
        
        const line = document.createElement('div');
        line.textContent = lines[i];
        document.getElementById('content').appendChild(line);
        i++;
      }, 1000);
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Enter key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö login
      document.getElementById('username').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          document.getElementById('password').focus();
        }
      });
      
      document.getElementById('password').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          login();
        }
      });
      
      // Enter key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡∏≠‡∏≤‡∏£‡∏µ‡πà
      document.getElementById('pw').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          checkPassword();
        }
      });
    });

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
    async function init() {
      await loadDiary();
    }

    init();
  </script>
</body>
</html>
